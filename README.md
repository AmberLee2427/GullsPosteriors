# GullsPosteriors

This repository collects posterior distributions for microlensing events
generated by the **Gulls** simulations. The code is organised into modular
packages and a few run scripts that drive end‑to‑end fits.

## Repository layout

- **Data** – routines for loading light‑curve data. `Data.load_data`
  enumerates the file columns and explains how magnitudes may be derived from
  the fluxes.
- **Event** – represents an individual microlensing event. It links `Parallax`
  and `Orbit` helpers to compute magnification curves.
- **Fit** – parameter inference tools. Sampling is provided by `emcee` or
  `dynesty` with convenience routines for plotting chains and corner diagrams.
- **Orbit** – uses JPL Horizons to fetch observatory ephemerides.
- **Parallax** – converts observatory positions into north/east coordinates and
  provides parallax shifts.
- **Scripts and notebooks** – utilities such as
  `gulls_post_emcee_bound_w_pt.py` run the full modelling workflow. Sample
  notebooks illustrate analyses.

## Installing

Create and activate a conda environment using the packages listed in `environment.yml`:

```bash
# Create the environment
conda env create -f environment.yml

# Activate the environment
conda activate GullsPosteriors

# Verify the installation
python -c "import emcee; import dynesty; import VBMicrolensing; print('Installation successful!')"
```

Key dependencies include Python 3.8, `emcee`, `dynesty` and the external
`VBMicrolensing` package.

## Example usage

The `gulls_post_emcee_bound_w_pt.py` script accepts the number of events to
process and optional flags for sampler and threads, e.g.

```bash
python gulls_post_emcee_bound_w_pt.py 1 -s emcee -t 4
```

Plots and posterior samples are saved in the working directory.

## Learning more

- Examine `Data.new_event` and `Data.load_data` to understand the light‑curve
  format.
- `Event.projected_separation` describes the source–lens geometry.
- `Fit` exposes `run_emcee` and `prior_transform` for controlling MCMC or
  nested sampling.
- The included notebooks showcase references and diagnostic plots.

